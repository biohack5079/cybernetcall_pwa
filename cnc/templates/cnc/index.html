{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CyberNetCall</title>
  <link rel="manifest" href="{% static 'cnc/manifest.json' %}">
  <!-- ã‚¢ã‚¤ã‚³ãƒ³ãƒ‘ã‚¹ã‚’ä¿®æ­£ (manifest.json ã«åˆã‚ã›ã‚‹) -->
  <link rel="icon" href="{% static 'cnc/icons/icon-192x192.png' %}">
  <!-- CSSãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€ -->
  <link rel="stylesheet" href="{% static 'cnc/style.css' %}">
  <!-- å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒª (deferã§éžåŒæœŸèª­ã¿è¾¼ã¿) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dompurify/3.0.8/purify.min.js" integrity="sha512-xss3FFnHvjLzqzJSGe6F9Pa7NWUyGVQirGq0/Hj+D3FN6n19r/M6+5Qk+Kmf+kQeBi9h7LuYwZSQubHwm9iYrw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js" defer></script>
  <script src="https://unpkg.com/idb@7/build/umd.js" defer></script>
  <script src="https://unpkg.com/html5-qrcode" defer></script>
  <!-- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æœ¬ä½“ã®JavaScript -->
  <script src="{% static 'cnc/app.js' %}" defer></script>
</head>
<body>
  <h1>CyberNetCall</h1>
  <!-- æŽ¥ç¶šçŠ¶æ…‹è¡¨ç¤ºç”¨ -->
  <div id="connectionStatus" style="display: none; font-weight: bold; margin-bottom: 1rem;"></div>
  <p>Scan the QR code or let your friend scan yours to connect.</p>

  <!-- QRã‚³ãƒ¼ãƒ‰è¡¨ç¤ºç”¨ -->
  <canvas id="qrcode"></canvas>

  <!-- QRã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ€ãƒ¼ç”¨ -->
  <!-- â˜… ã‚¹ã‚­ãƒ£ãƒ³é–‹å§‹ãƒœã‚¿ãƒ³ã‚’è¿½åŠ  -->
  <button id="startScanButton" style="margin-top: 1rem;">Scan QR Code</button>
  <!-- â˜… åˆæœŸçŠ¶æ…‹ã¯éžè¡¨ç¤ºã« -->
  <div id="qr-reader" style="width: 300px; margin: 20px auto; display: none;"></div>
  <div id="qr-reader-results" style="margin-top: 10px; font-style: italic;"></div>

  <!-- Direct Mail ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <section class="section">
    <h2>Direct Mail</h2>
    <label for="messageInput" class="visually-hidden">Direct Message</label>
    <input type="text" id="messageInput" placeholder="Type a message..." aria-label="Direct Message">
    <button id="sendMessage">Send</button>
    <div id="messageArea" class="message-area"></div>
  </section>

  <!-- Post Friends ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
  <section class="section">
    <h2>Group Chat</h2>
    <label for="postInput" class="visually-hidden">Post Friends</label>
    <input type="text" id="postInput" placeholder="Write your post..." aria-label="Post Content">
    <button id="sendPost">Post</button>
    <div id="postArea" class="post-area"></div>
  </section>

  <!-- Group Meeting ã‚»ã‚¯ã‚·ãƒ§ãƒ³ (1å¯¾1ãƒ“ãƒ‡ã‚ªé€šè©±) -->
  <section class="section">
    <h2>Video Meeting</h2>
    <div class="video-container">
      <video id="localVideo" autoplay muted playsinline></video>
      <video id="remoteVideo" autoplay playsinline></video>
    </div>
    <div class="call-controls">
      <button id="callButton" aria-label="Start/End Call">ðŸ“ž</button>
      <button id="videoButton" aria-label="Toggle Video">ðŸŽ¥</button> <!-- style="display: none;" ã¯å‰Šé™¤æ¸ˆã¿ -->
    </div>
    <!-- ãƒ•ã‚¡ã‚¤ãƒ«é€ä¿¡æ©Ÿèƒ½ -->
    <div style="margin-top: 1rem;">
        <label for="fileInput">Share File:</label>
        <input type="file" id="fileInput">
        <button id="sendFile">Send File</button>
        <span id="file-transfer-status" style="margin-left: 10px; font-style: italic;"></span> <!-- Status display -->
    </div>
  </section>

  <!-- friendList ã¯ç¾åœ¨æœªä½¿ç”¨ã®ãŸã‚ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã¾ãŸã¯å‰Šé™¤ -->
  <!-- <div id="friendList"></div> -->

</body>
</html>

